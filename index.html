<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>GeoTab-ClearQuote integration</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  </head>


  <body>
      <iframe class="col-12 vh-100" src="https://cq-uat.web.app/#/pages/home" frameborder="0"></iframe>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Custom script -->
    <script type="text/javaScript">
      console.log("clearquote geotab in JS 1.1");
      geotab.addin.clearquote = function(api, state) {
        return {
          initialize: function(api, state, callback) {
            // Logs
            console.log("clearquote addin: initialized");

            // [Step 1] Get the Geo tab's user data
            console.log("Result for Geo tab's result data") 
            api.getSession(
              function (result) {
                console.log(result) 
              }
            )

            // [Step 2] Get the server path
            console.log("Server path (window.location.href) -> " + window.location.href)
            console.log("host name (window.location.hostname) -> " + window.location.hostname)

            // [Step 3] Get device API call
            api.call(
              "Get",
              {
                "typeName":"Device",
                "resultsLimit":1,
              },
              function (result) {
                  console.log("Devices")
                  console.log(result)
              }
            );
              
            // Rest
            callback();
          },

          focus: function() {
            // Logs
            console.log("clearquote addin: focused");
          },

          blur: function() {
            // Logs
            console.log("clearquote addin: blur");
          }
        };
      };
    </script>
  </body>
</html>